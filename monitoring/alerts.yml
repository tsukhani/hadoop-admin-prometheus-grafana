groups:
- name: hadoop_admin_alerts
  rules:
  - alert: InstanceDown
    expr: up == 0
    for: 2m
    labels: { severity: critical }
    annotations:
      summary: "Instance {{ $labels.instance }} down"
      description: "Prometheus target is not responding"

  - alert: NamenodeHighHeap
    expr: jvm_memory_heap_used_bytes{job="hadoop-jmx", instance=~".*:7000"} / jvm_memory_heap_max_bytes{job="hadoop-jmx", instance=~".*:7000"} > 0.85
    for: 5m
    labels: { severity: warning }
    annotations:
      summary: "NameNode high heap usage"
      description: "Heap usage > 85% for 5m"

  - alert: RootDisk90Percent
    expr: (node_filesystem_size_bytes{mountpoint="/"} - node_filesystem_free_bytes{mountpoint="/"}) / node_filesystem_size_bytes{mountpoint="/"} > 0.9
    for: 10m
    labels: { severity: warning }
    annotations:
      summary: "High root disk usage"
      description: "Disk usage on {{ $labels.instance }} exceeded 90%"
